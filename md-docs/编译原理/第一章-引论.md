
# 第一章-引论

> 本节内容是关于编译原理的整体概览

只有很少的读者将回去构建甚至维护一个主流程序设计语言的编译器, **但是和编译器相关的模型,理论和算法可以被应用到软件设计和开发中出现的各种各样的问题上**. 因此我们会关注哪些在设计一个语言处理器时常常会遇到的问题, 而不考虑具体的源语言和目标机器究竟是什么

简单来说, 编译器是一个程序, 它可以阅读某一种语言便携的程序, 并把该程序翻译成一个等价的, 用另一种语言编写的程序. 编译器的重要任务之一就是报告它在翻译过程中发现的源程序中的错误

解释器是另一种常见的语言处理器, 它并不通过翻译的方式生成目标程序, 从用户的角度来看, 解释器直接利用用户提供的输入执行源程序中的指定操作

再把用户输入映射成为输出的过程中, 编译器产生的机器语言目标程序通常要比一个解释器快的多, 然而解释器的错误诊断效果通常要比编译器更好, 因为它逐个语句的执行源程序

> java 是一个非常经典的编译+解释的过程, java 源程序首先被编译为一个称为"字节码"的中间表示形式, 然后由一个虚拟机对得到的字节码加以解释执行. 这样的好处之一是在一台机器上编译得到的字节码可以在另一台机器上解释执行. 为了更快的完成输入到输出的处理, 特殊的处理方法比如即时编译器(just in time, JIT)

## 编译器的结构

分析(analysis)部分把源程序分解成为多个组成要素,并在这些要素之上加上语法结构.然后,它使用这个结构来创建该源程序的一个中间表示.如果分析部分检查出源程序没有按照正确的语法构成,或者语义上不一致,它就必须提供有用的信息,使得用户可以按此进行改正.分析部分还会收集有关源程序的信息,并把信息存放在一个称为符号表( symbol table)的数据结构中.符号表将和中间表示形式一起传送给综合部分.

综合(synthesis)部分根据中间表示和符号表中的信息来构造用户期待的目标程序.**分析部分经常被称为编译器的前端(front end),而综合部分称为后端(back end).**

下图是一个非常经典的编译执行顺序, 读者应该已经看过无数次了

![20230701231646](https://raw.githubusercontent.com/learner-lu/picbed/master/20230701231646.png)

有些编译器在前端和后端之间还有一个机器无关的**优化步骤**, 这个优化步骤的目的是在中间表示之上进行转换, 以便后端程序能够生成更好的目标程序

## 编程语言发展历史

当前有几千种程序设计语言.可以通过不同的方式对这些语言进行分类.方式之一是通过语言的代来分类.

- 第一代语言是机器语言
- 第二代语言是汇编语言
- 第三代语言是Fortran,Cobol、Lisp、C、C++、C#及Java这样的高级程序设计语言.
- 第四代语言是为特定应用设计的语言,比如用于生成报告的NOMAD,用于数据库查询的SQL和用于文本排版的 Postscript.
- 第五代语言指的是基于逻辑和约束的语言,比如Prolog和 OPS5.

另一种语言分类方式是按照语言的设计特性

- 把程序中指明如何完成一个计算任务的语言的称为强制式( imperative)语言

  诸如C、C++、C#和Java等语言都是强制式语言.所有强制式语言中都有用于表示程序状态和语句的表示方法,这些语句可以改变程序状态.

- 把程序中指明要进行哪些计算的语言称为声明式( declarative)语言.
  
  像ML、Haskell这样的函数式语言和Prolog这样的约束逻辑语言通常被认为是声明式语言.

面向对象语言( object-oriented language)指的是支持面向对象编程的语言,面向对象编程是指用一组相互作用的对象组成程序的编程风格.Simula67和Smaltalk是早期的主流面向对象语言.C++、C#、Java和 Ruby是现在常用的面向对象语言.

脚本语言( scripting language)是具有高层次运算符的解释型语言,它通常被用于把多个计算过程"粘合"在一起.这些计算过程被称为脚本.Awk 、JavaScript、Perl、PHP、Python、Ruby 和Tcl是常见的脚本语言.使用脚本语言编写的程序通常要比用其他语言(比如C)写的等价的程序短很多.

## 编译器的设计与挑战

编译器的设计中有很多通过数学方法抽象出问题本质从而解决现实世界中复杂问题的完美例子, 这些例子可以被用来说明如何使用抽象方法来解决问题:**接受一个问题,写出抓住了问题的关键特性的数学抽象表示,并用数学技术来解决它**.问题的表达必须根植于对计算机程序特性的深人理解,而解决方法必须使用经验来验证和精化.

编写编译器是很有挑战性的.编译器本身就是一个大程序.而且,很多现代语言处理系统在同一个框架内处理多种源语言和目标机.也就是说,这些系统可以被当做一组编译器来使用,可能包含几百万行代码.因此,**好的软件工程技术**对于创建和发展现代的语言处理器是非常重要的.

编译器必须能够正确翻译用源语言书写的所有程序.这样的程序的集合通常是无穷的.为一个源程序生成最佳目标代码的问题--般来说是不可判定的.因此,**编译器的设计者必须作出折衷处理,确定解决哪些问题,使用哪些启发式信息,以便解决高效代码生成的问题.**

